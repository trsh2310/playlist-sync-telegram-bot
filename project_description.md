## Описание функционала проекта

### Основной функционал

1. **Скрапинг плейлистов с различных платформ**

- Если есть доступ к free API, то бот должен поддерживать авторизацию через API. Иначе бот запрашивает логин и пароль пользователя от сервиса и заходит от его имени. (Если на сайте нет обхода ботов).
- Бот скрапит плейлист пользователя и сохраняет его локально (сохраняет список песен с метаданными, подробнее описанными дальше).

2. **Синхронизация плейлистов между платформами**

- Бот позволяет пользователю выбрать второй музыкальный сервис для синхронизации, а затем ищет песни из оригинального плейлиста на этой платформе.
- Если синхронизация через API невозможна, бот предложит альтернативные варианты. 
В случае успешного создания нового плейлиста бот предоставит ссылку на него. 
Иначе бот предложит скачать текстовый файл со списком песен. Это позволит пользователю вручную создать плейлист.

3. **Поиск песен на второй платформе**

    Бот ищет по метаданным (название трека, автор) песни и предлагает на выбор:
    - добавить все песни,
    - пропустить определенные,
    - закончить синхронизацию.

4. **Управление плейлистами**

    Бот предоставляет возможность:
    - создать плейлист на выбранной платформе,
    - скопировать существующий,
    - удалить плейлист.


### Пользователький интерфейс

1) Пользователь начинает с команды `/start`, и бот объясняет, как он работает.
2) Пользователь выбирает платформу (Spotify, VK, Яндекс.Музыка, Zvook) и авторизуется. Бот запрашивает разрешения или логин/пароль, если API не доступно.
3) Пользователь выбирает плейлист.
4) Бот спрашивает, что пользователь хочет сделать с плейлистом.
5) На основе ответа бот копирует/синхронизирует/удаляет плейлист.
6) Бот предлагает выбрать вторую платформу и пытается найти все доступные треки из плейлиста на этой платформе.
7) Бот сообщает, сколько песен удалось найти, и создаёт новый плейлист или экспортирует его в текстовый файл.

## Структура проекта 

### База данных
Бот может использовать SQLite или PostgreSQL для хранения информации о пользователях, учётных данных (в зашифрованном виде), и информации о плейлистах.
    
Хранение метаданных треков: названия, исполнителя, длительности и ID для каждого сервиса.

**Структура БД**

- <u>Пользователи:</u> ID, Telegram ID, список подключенных сервисов, зашифрованные логин/пароль.
- <u>Плейлисты:</u> ID пользователя, платформа, ID плейлиста на платформе, метаданные треков (JSON поле).
- <u>Треки:</u> ID трека, название, исполнитель, длительность, уникальные идентификаторы для платформ.

### Архитектура

Воспользуемся моделью <u>Model-View-Controller</u>, где
- Model работает с базой данных и API для хранения и обработки данных о пользователях и их плейлистах,
- View представляет собой интерфейс бота,
- Controller отвечает за логику взаимодействия между бэкендом и Telegram API.

**Основной модуль Telegram-бота:** 
обработка команд и взаимодействия с пользователем.

**Модули интеграции с API:**
отдельные модули для интеграции с каждой музыкальной платформой.

**Модуль скрапинга:** 
имитация поведения пользователя (авторизация, извлечение данных, обработка). Работает для платформ, где API не даёт нужных данных, и выполняет парсинг HTML страниц.

**Модуль поиска и синхронизации:**
сопоставление треков на разных платформах и управление процессом их добавления в новый плейлист.

**Модуль управления плейлистами:**
создание, удаление и копирование плейлистов на каждой платформе.

### Защита данных

- Шифрование учётных данных пользователей (при необходимости хранения логинов/паролей).
- Ограничения доступа к API и данным пользователей, защита от несанкционированного доступа.

## Разделение на задачи

### Катя - Backend-разработка API интеграций
тг: `@nemessiiis`

**Разработка интеграции с API:**
- Реализация функций для работы с API Spotify, VK, Yandex Music и Zvook.
- Создание обработки ошибок и исключений для запросов к API.
- Написание документации для используемых API и их методов.

**Разработка логики обработки данных:**
- Обработка полученных данных от API, включая фильтрацию и форматирование.
- Создание структуры данных для хранения результатов поиска.

**Создание модуля для парсинга:**
- Разработка модуля для парсинга данных с платформ, которые не поддерживают API.
- Обработка и хранение полученных данных.

**Тестирование интеграций:**
- Написание тестов для проверки корректности работы API и парсинга.



### Арина - Frontend-разработка для Telegram
тг: `@nrnirnr`

**Создание интерфейса для бота:**
- Разработка команд и интерактивного меню для удобного взаимодействия с пользователем.
- Реализация команд для поиска, создания и синхронизации плейлистов.

**Обработка пользовательских запросов:**
- Написание логики для обработки введенных пользователем данных (поиск песен, альбомов, исполнителей).
- Форматирование и отправка результатов поиска обратно пользователю.

**Интеграция с бэкендом:**
- Настройка взаимодействия между фронтендом и бэкендом (например, отправка запросов на поиск и получение результатов).

**Тестирование интерфейса:**
- Проведение тестов на удобство использования интерфейса и его функциональности.
- Устранение ошибок и улучшение взаимодействия с пользователем на основе тестирования.

### Общие задачи
- Cовместное тестирование интеграции фронтенда и бэкенда для обеспечения согласованности в работе бота.


